# Migration `20201008015258-add-magic-fields-to-user`

This migration has been generated by Luke Hamilton at 10/7/2020, 9:52:58 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "issuer" text   ,
ADD COLUMN "publicEthAddress" text   

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.issuer_unique" ON "public"."User"("issuer")

ALTER INDEX "public"."Section.date" RENAME TO "Section.date_unique"

ALTER INDEX "public"."Topic.slug" RENAME TO "Topic.slug_unique"

ALTER INDEX "public"."User.auth0id" RENAME TO "User.auth0id_unique"

ALTER INDEX "public"."User.username" RENAME TO "User.username_unique"

ALTER INDEX "public"."User.username_lower" RENAME TO "User.username_lower_unique"

ALTER INDEX "public"."User.walletAddress" RENAME TO "User.walletAddress_unique"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200810233034-add-wallet-to-user..20201008015258-add-magic-fields-to-user
--- datamodel.dml
+++ datamodel.dml
@@ -4,39 +4,41 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
-  id             String        @default(cuid()) @id
-  createdAt      DateTime      @default(now())
-  updatedAt      DateTime      @updatedAt
-  email          String        
-  role           Role          @default(USER)
-  walletAddress  String?       @unique
-  walletIsSetup  Boolean?      @default(false)
-  firstName      String?
-  lastName       String?
-  name           String?
-  name_lower     String?
-  username       String?       @unique
-  username_lower String?       @unique
-  headline       String?
-  avatar         String?
-  auth0id        String        @unique
-  identity       String?
-  privateKey     String
-  follows        User[]        @relation("follows", references: [id])
-  followedBy     User[]        @relation("follows", references: [id])
-  address        String
-  followedTopics Topic[]       @relation(references: [id])
-  comments       Comment[]
-  commentVotes   CommentVote[]
-  votes          Vote[]
-  posts          Post[]
-}
+  id               String        @default(cuid()) @id
+  createdAt        DateTime      @default(now())
+  updatedAt        DateTime      @updatedAt
+  email            String        @unique
+  issuer           String?       @unique
+  publicEthAddress String?
+  role             Role          @default(USER)
+  walletAddress    String?       @unique
+  walletIsSetup    Boolean?      @default(false)
+  firstName        String?
+  lastName         String?
+  name             String?
+  name_lower       String?
+  username         String?       @unique
+  username_lower   String?       @unique
+  headline         String?
+  avatar           String?
+  auth0id          String        @unique
+  identity         String?
+  privateKey       String
+  follows          User[]        @relation("follows", references: [id])
+  followedBy       User[]        @relation("follows", references: [id])
+  address          String
+  followedTopics   Topic[]       @relation(references: [id])
+  comments         Comment[]
+  commentVotes     CommentVote[]
+  votes            Vote[]
+  posts            Post[]
+}  
 model Topic {
   id             String   @default(cuid()) @id
   createdAt      DateTime @default(now())
```


